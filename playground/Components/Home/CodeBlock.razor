@inject IJSRuntime JS

<div class="code-block @(Highlight ? "border-green-800" : "")">
    @if(!string.IsNullOrEmpty(Title))
    {
        <div class="code-block-header @(Highlight ? "bg-green-800/50" : "")">
            <span class="text-xs px-2 @(Highlight ? "text-green-400" : "text-gray-400")">‚óè @Title</span>
        </div>
    }
    <pre class="code-content line-numbers text-sm max-h-150 overflow-y-auto"><code class="language-csharp">@Code</code></pre>
</div>

@code {
    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Code { get; set; } = "";
    [Parameter] public string Size { get; set; } = "sm";
    [Parameter] public bool Highlight { get; set; } = false;
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("Prism.highlightAll");
            // Apply enhanced C# semantic highlighting after Prism
            await JS.InvokeVoidAsync("csharpHighlighting.enhanceHighlighting");
        }
    }
}
